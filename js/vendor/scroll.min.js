(function(k){k.superscrollorama=function(A){function v(b){b={top:parseFloat(b.css("top")),left:parseFloat(b.css("left"))};isNaN(b.top)&&(b.top=0);isNaN(b.left)&&(b.left=0);return b}function B(){w&&(y(),w=!1)}function z(b){b.el.css("position",b.origPositioning.pos);b.el.css("top",b.origPositioning.top);b.el.css("left",b.origPositioning.left)}function m(b,g){b&&(b.totalProgress?b.totalProgress(g).pause():b.progress(g).pause())}function y(){var b=g.settings.isVertical?u.scrollTop()+l.y:u.scrollLeft()+
l.x,h=g.settings.triggerAtCenter?g.settings.isVertical?-u.height()/2:-u.width()/2:0,e,c,f,a=q.length;for(e=0;e<a;e++){var d=q[e];c=d.target;f=d.offset;"string"===typeof c?(r=k(c).offset()||{},c=g.settings.isVertical?r.top+l.y:r.left+l.x,f+=h):"number"!==typeof c&&(k.isFunction(c)?c=c.call(this):(r=c.offset(),c=g.settings.isVertical?r.top+l.y:r.left+l.x,f+=h));c+=f;f=c+d.dur;b>c&&b<f&&"TWEENING"!==d.state&&(d.state="TWEENING",d.start=c,d.end=f);if(b<c&&"BEFORE"!==d.state&&d.reverse)g.settings.playoutAnimations||
0===d.dur?d.tween.reverse():m(d.tween,0),d.state="BEFORE";else if(b>f&&"AFTER"!==d.state)g.settings.playoutAnimations||0===d.dur?d.tween.play():m(d.tween,1),d.state="AFTER";else if("TWEENING"===d.state)if(c=!1,d.tween.repeat&&(c=-1===d.tween.repeat()),c){c=d.tween.totalProgress();if(null===d.playeadLastPosition||c===d.playeadLastPosition)1===c?d.tween.yoyo()?d.tween.reverse():d.tween.totalProgress(0).play():d.tween.play();d.playeadLastPosition=c}else m(d.tween,(b-d.start)/(d.end-d.start))}h=n.length;
for(e=0;e<h;e++){a=n[e];d=a.el;if("PINNED"!==a.state){var p=a.spacer.offset();"UPDATE"===a.state&&z(a);c=g.settings.isVertical?p.top+l.y:p.left+l.x;c+=a.offset;f=c+a.dur;var t=b>f&&"BEFORE"===a.state||b<c&&"AFTER"===a.state;if(b>c&&b<f||t){a.pushFollowers&&"static"===d.css("position")&&d.css("position","relative");a.origPositioning={pos:d.css("position"),top:a.spacer.css("top"),left:a.spacer.css("left")};a.fixedPositioning={top:g.settings.isVertical?-a.offset:p.top,left:g.settings.isVertical?p.left:
-a.offset};d.css("position","fixed");d.css("will-change","top");d.css("top",a.fixedPositioning.top);d.css("left",a.fixedPositioning.left);a.pinStart=c;a.pinEnd=f;a.pushFollowers?g.settings.isVertical?a.spacer.height(a.dur+d.outerHeight(!0)):a.spacer.width(a.dur+d.outerWidth(!0)):"absolute"===a.origPositioning.pos?(a.spacer.width(0),a.spacer.height(0)):g.settings.isVertical?a.spacer.height(d.outerHeight(!0)):a.spacer.width(d.outerWidth(!0));if("UPDATE"===a.state)a.anim&&m(a.anim,0);else if(a.onPin)a.onPin("AFTER"===
a.state);a.state="PINNED"}}if("PINNED"===a.state)if(b<a.pinStart||b>a.pinEnd){if(c=b<a.pinStart,a.state=c?"BEFORE":"AFTER",m(a.anim,c?0:1),f=c?0:a.dur,g.settings.isVertical?a.spacer.height(a.pushFollowers?f:0):a.spacer.width(a.pushFollowers?f:0),d=a.fixedPositioning.top-v(a.el).top,p=a.fixedPositioning.left-v(a.el).left,z(a),a.pushFollowers&&"absolute"!==a.origPositioning.pos||("relative"===a.origPositioning.pos?(t=g.settings.isVertical?parseFloat(a.origPositioning.top):parseFloat(a.origPositioning.left),
isNaN(t)&&(t=0)):t=g.settings.isVertical?a.spacer.position().top:a.spacer.position().left,a.el.css(g.settings.isVertical?"top":"left",t+f)),0!==d&&a.el.css("top",v(a.el).top-d),0!==p&&a.el.css("left",v(a.el).left-p),a.onUnpin)a.onUnpin(!c)}else a.anim&&m(a.anim,(b-a.pinStart)/(a.pinEnd-a.pinStart))}}var g={};g.settings=k.extend({},{isVertical:!0,triggerAtCenter:!0,playoutAnimations:!0,reverse:!0},A);var u=k(window),q=[],n=[],l={x:0,y:0},w=!1,r,x;g.addTween=function(b,h,e,c,f){h.pause();q.push({target:b,
tween:h,offset:c||0,dur:e||0,reverse:"undefined"!==typeof f?f:g.settings.reverse,state:"BEFORE"});return g};g.pin=function(b,h,e){"string"===typeof b&&(b=k(b));e=k.extend({},{offset:0,pushFollowers:!0},e);e.anim&&e.anim.pause();var c=k('<div class="superscrollorama-pin-spacer"></div>');c.css("position","relative");c.css("top",b.css("top"));c.css("left",b.css("left"));b.before(c);n.push({el:b,state:"BEFORE",dur:h,offset:e.offset,anim:e.anim,pushFollowers:e.pushFollowers,spacer:c,onPin:e.onPin,onUnpin:e.onUnpin});
return g};g.updatePin=function(b,h,e){"string"===typeof b&&(b=k(b));e.anim&&e.anim.pause();var c=n.length;for(x=0;x<c;x++){var f=n[x];b.get(0)===f.el.get(0)&&(h&&(f.dur=h),e.anim&&(f.anim=e.anim),e.offset&&(f.offset=e.offset),"undefined"!==typeof e.pushFollowers&&(f.pushFollowers=e.pushFollowers),e.onPin&&(f.onPin=e.onPin),e.onUnpin&&(f.onUnpin=e.onUnpin),(h||e.anim||e.offset)&&"PINNED"===f.state&&(f.state="UPDATE",y()))}return g};g.removeTween=function(b,h,e){var c=q.length;"undefined"===typeof e&&
(e=!0);for(var f=0;f<c;f++){var a=q[f];a.target!==b||h&&a.tween!==h||(q.splice(f,1),e&&m(a.tween,0),c--,f--)}return g};g.removePin=function(b,h){"string"===typeof b&&(b=k(b));"undefined"===typeof h&&(h=!0);for(var e=n.length,c=0;c<e;c++){var f=n[c];f.el.is(b)&&(n.splice(c,1),h&&(f.spacer.remove(),z(f),f.anim&&m(f.anim,0)),e--,c--)}return g};g.setScrollContainerOffset=function(b,h){l.x=b;l.y=h;return g};g.triggerCheckAnim=function(b){b?y():w=!0;return g};(function(){u.scroll(function(){w=!0});TweenLite.ticker.addEventListener("tick",
B)})();return g}})(jQuery);